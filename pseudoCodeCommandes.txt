Commandes :
SET key value :

*Set key to hold the string value. If key already holds a value, it is overwritten, regardless of its type. Any previous time to live associated with the key is discarded on successful SET operation.

J'ai besoin d'un objet java associé à une clé, qui contient une valeur associée, et un expirationTime
-> après expiration time -> pop du map

Pour supprimer du map, on va créer un Thread daemon en paralléle au serveur qui va toute les secondes vérifier pour chaque clés si l'objet à l'intérieur est expiré

Cette objet est contenu dans un MAP<Object, ServeurObject> (clé = String ou int)

ServeurObject :
- Double expiration
- Double creationMillis
- Object value

SETNX key value :

*Set key to hold string value if key does not exist. In that case, it is equal to SET. When key already holds a value, no operation is performed. SETNX is short for "SET if Not eXists".

On va simplement faire la même fonction à SET, avec en plus une vérification de l'existant

STRLEN key :

*Returns the length of the string value stored at key. An error is returned when key holds a non-string value

La valeur de mon objet est de type Object, on va devoir vérifier si c'est un String d'abord

get key :

récupération de la valeur de la clé "key" dans l'objet java

expire key timeout (option) :

met un timeout sur un clé, quand le timeout est dépassé supprime la variable - timeout en seconde

 - option
0 -- Comportement normal
1 -- Applique expias encre seulement si la key n'a pore de timeout
2 -- Applique expire seulement si la key a un timeout et le remplace
3 -- Applique expire seulement si le nouveau timeout est plus grand que l'ancien
4 -- Applique expire seulement si le nouveau timeout est plus petitque l'ancien



--Command Exist
package Commands;

import java.util.Map;

public class ExistCommand {

    /* Cette méthode prends en entrée une Map et un tableau de String, et retourne un int qui est le nombre
    de clés existants dans la map donné en entrée
    */
    public static int Exist(Map<String, String> map, String[] parameters) {
        int res = 0; //res est initialisée à 0 et c'est le résultat de la méthode

        // on itére sur le tableau de string
        for (String key : parameters) {
             /*
            Si la clé existe dans la Map,
            la variable res est incrémentée
             */
            if (map.containsKey(key)) {
                res++;
            }
        }
        return res; }
}

---Command DEL

package Commands;
import java.util.HashMap;
import java.util.Map;
public class DelCommand {

    /* Cette méthode prends en entrée une Map et un tableau de String, et retourne un int qui est le nombre
    de clés qu'on a supprimé
    */
    public static int Del(Map<String, String> map, String[] parameters) {
        int res = 0; //res est initialisée à 0.

        // on itére sur le tableau de string
        for (String key : parameters) {
            /*
            Si la clé existe dans la Map,
            elle est supprimée à l'aide de la méthode remove(),
            et la variable res est incrémentée
             */
            if (map.containsKey(key)) {
                map.remove(key);
                res++;
            }
        }
        return res; }
}
